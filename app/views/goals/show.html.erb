<%= render partial: 'goals/description', locals: { goal: @goal } %>

<%= render layout: 'shared/card' do %>
  <turbo-frame id="goal-summary" src="<%= goal_summary_path(@goal) %>">
  </turbo-frame>
<% end %>

<%= render layout: 'shared/card' do %>
  <canvas id="measurements_graph" class="p-4" style="width: 90vw"></canvas>
<% end %>

<%= render layout: 'shared/card' do %>
  <turbo-frame id="goal-table" src="<%= table_goal_measurements_path(@goal) %>">
  </turbo-frame>
<% end %>

<%= render layout: 'shared/card', locals: { title: 'Measurements' } do %>
  <turbo-frame id="new_measurement" src="<%= new_goal_measurement_path(@goal) %>">
  </turbo-frame>
  <turbo-frame id="measurements" src="<%= goal_measurements_path(@goal) %>">
  </turbo-frame>
<% end %>

<script>
var ctx = document.getElementById('measurements_graph').getContext('2d');
var chart_definition = <%= raw(@goal.chart_definition) %>;
var myChart = new Chart(ctx, chart_definition);
</script>
