<div class="lg:flex lg:justify-center my-6 lg:m-6">
    <div id="goal" class="flex items-center bg-white lg:rounded-lg shadow-md">
        <div class="p-6 lg:p-2 lg:pl-3 lg:rounded-l-lg bg-indigo-800 text-indigo-100">Goal</div>
        <div class="w-full text-center lg:p-2"><%= @goal.description %></div>
        <%= link_to edit_goal_path(@goal) do %>
            <i class="fas fa-edit p-6 lg:p-2 lg:pr-3 text-indigo-800 hover:text-indigo-600"></i>
        <% end %>
    </div>
</div>

<%= render layout: 'shared/card' do %>
    <div class="flex justify-around p-4">
      <div class="flex flex-col items-center mx-6">
        <div class="text-base"><%= @goal.latest_date %></div>
        <div class="lg:text-3xl"><%= @goal.latest_value %>kg</div>
        <div class="lg:text-3xl"><%= @goal.to_go %>kg</div>
        <div class="text-base">to go</div>
      </div>
      <div class="flex flex-col items-center mx-6">
        <div class="text-base">target</div>
        <div class="lg:text-3xl"><%= @goal.target %>kg</div>
        <div class="lg:text-3xl"><%= @goal.target_delta %>kg</div>
        <div class="text-base"><%= @goal.target_delta_word %></div>
      </div>
      <div class="flex flex-col items-center mx-6">
        <div class="text-base">target per day</div>
        <div class="lg:text-3xl"><%= @goal.daily_goal %>kg</div>
        <div class="lg:text-3xl"><%= @goal.daily_historic %>kg</div>
        <div class="text-base">actual per day</div>
      </div>
      <div class="flex flex-col items-center mx-6">
        <div class="text-base">goal date</div>
        <div class="lg:text-3xl"><%= @goal.projected_value %>kg</div>
        <div class="lg:text-3xl"><%= @goal.projected_date %></div>
        <div class="text-base">goal value</div>
      </div>
    </div>
<% end %>

<%= render layout: 'shared/card' do %>
    <canvas id="measurements_graph" class="p-4" style="width: 90vw"></canvas>
<% end %>

<%= render layout: 'shared/card', locals: { title: 'Measurements' } do %>
  <div class="p-4 pb-0">
    <%= render 'measurements/form' %>
  </div>
  <%= render @goal.measurements %>
<% end %>

<script>
var ctx = document.getElementById('measurements_graph').getContext('2d');
var chart_definition = <%= raw(@goal.chart_definition) %>;
var myChart = new Chart(ctx, chart_definition);
</script>
